<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/style.css" />
    <title>Список</title>
  </head>
  <body>
    <div class="container">
      <h1>Список того, что нужно сделать.</h1>
      <form action="/" method="POST" autocomplete="off">
        <input
          type="text"
          placeholder="Добавить задачу..."
          name="todoValue"
          required
        />
        <button type="submit">Добавить</button>
      </form>

      <% if(data) { %> <% data.forEach(todoValue => {%>

      <div class="todo-container">
        <div class="todo-value"><%= todoValue.todo %></div>
        <div class="todo-delete">
          <form action="/<%= todoValue._id %>" method="POST">
            <button type="submit">Удалить</button>
          </form>
        </div>
      </div>
      <% })%> <% }%>
    </div>

    <!-- <script>
      const deleteButton = document.querySelectorAll(".todo-delete");

      deleteButton.forEach((button, i) => {
        button.addEventListener("click", () => {
          const endPoint = `/${button.classList[1]}`;
          fetch(endPoint, {
            method: "DELETE",
          });
          //   widnow.location.href = "/";
        });
      });
    </script> -->
  </body>
</html>
